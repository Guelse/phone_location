<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>HEQEE - IpLocation API - IP归属地查询接口PHP版</title>
  <meta name="keywords" content="Google Voice API,Fetion API,IpLocation API,Google Voice 短信发送接口PHP版,飞信好友免费短信API接口,IP归属地查询接口PHP版,heqee.com" />
  <meta name="description" content="Google Voice API,Fetion API,IpLocation API,Google Voice 短信发送接口PHP版,飞信好友免费短信API接口,IP归属地查询接口PHP版,heqee.com" />
  <meta http-equiv="X-UA-Compatible" content="IE=7" >
  <meta http-equiv="Content-Type" content="text/html; charset=gbk" />
  <link href="./style/apps.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="./style/jquery.js"></script>
  <script>
  $(function(){
		 $.getJSON("ip.php?getip=v",function(data){
		  $("#guest_ip").html(data.ip); 
		  $("#guest_ipl").html(data.iplocation); 
		 });
	});

  </script>
</head>
<body>
  <div id="dialog">
    <h1>HEQEE - IpLocation API</h1>
        <div id="msg" style="display: none"></div>
    <form >
	 <div class="div_li menu">
        <label for="ip" class="a">您的IP是：<span id="guest_ip">loading...</span></label>
		<label for="ipl" class="a">经系统查询您是来自：<span  id="guest_ipl">loading...</span></label>
      </div>
      <div class="div_li" >
        <label for="ip">输入要查询的IP地址或者域名(*)：</label>
        <input  class="medium" type="text"  id="ip"   value="" /><span>如：221.231.1.1</span>
		
		<div id="login_submit">
        <input class="submit" type="button" accesskey="s" value="查询" onclick="return chkForm();"/>
		<input class="submit" type="button" accesskey="a" value="接口地址" onclick="return demoapi();"/>
		<input class="submit" type="button" accesskey="a" value="调用代码" onclick="return democode();"/>
		<input class="submit" type="button" accesskey="h" value="帮助" onclick="return help();"/>
      </div>
      </div>
      <div class="clean"></div>
	  <div class="list">
	  <a class="paypal" href="https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=SCKUVE7RMYPWA&lc=C2&item_name=IpLocationAPI&currency_code=USD&bn=PP%2dDonationsBF%3abtn_donate_SM%2egif%3aNonHosted" target="_blank"><img alt="" border="0" src="./style/btn_donate_SM.gif" alt="PayPal ― 最安全便捷的在线支付方式！"></a>
	  <ul>
		<li>IP归属地查询接口PHP版 <a href="../download/IpLocationApi.rar">下载开源代码</a></li>
		<li class="a">1、可返回text、js、json格式</li>
		<li class="a">2、可返回编码为UTF8或GBK的数据</li>
		<li >捐赠可获得项目整合服务</li>
		
	  </ul>
	  </div>
      
    </form>
	<div class="menu">
	  <ul>
		<li><a href="http://www.heqee.com/apps/gv/">GV短信接口</a></li>
		<li><a href="http://www.heqee.com/apps/fetion/">飞信短信接口</a></li>
		<li><a href="http://www.heqee.com/apps/ip/">IP归属地查询接口</a></li>
		<li>待续..</li>
	  </ul>
	</div>
	<div id="demo" style="display: none"></div>
	<p class="version">Powered By <a href="http://www.heqee.com" target="_blank">HEQEE</a></p>
  </div>
  <script type="text/javascript">
	function chkForm() {
        var ipArray,ip,j;
		ip = $("#ip").val();
		
		if(/[A-Za-z_-]/.test(ip)){
			if (ip.indexOf(" ")>=0){
				ip = ip.replace(/ /g,"");
				$("#ip").val(ip);
			}
			if (ip.toLowerCase().indexOf("http://")==0){
				ip = ip.slice(7);
				$("#ip").val(ip);
			}
			if(!/^([\w-]+\.)+((com)|(net)|(org)|(gov\.cn)|(info)|(cc)|(com\.cn)|(net\.cn)|(org\.cn)|(name)|(biz)|(tv)|(cn)|(mobi)|(name)|(sh)|(ac)|(io)|(tw)|(com\.tw)|(hk)|(com\.hk)|(ws)|(travel)|(us)|(tm)|(la)|(me\.uk)|(org\.uk)|(ltd\.uk)|(plc\.uk)|(in)|(eu)|(it)|(jp))$/.test(ip)){
				$("#msg").addClass('error').fadeIn('slow').html("您输入的不是正确的域名");
			    $("#ip").focus().select();
				return false;
			}
		}
		else{
			ipArray = ip.split(".");
			j = ipArray.length
			if(j!=4)
			{
				$("#msg").addClass('error').fadeIn('slow').html("您输入的不是正确的IP");
			    $("#ip").focus().select();
				return false;
			}

			for(var i=0;i<4;i++)
			{
				if(ipArray[i].length==0 || ipArray[i]>255)
				{
					$("#msg").addClass('error').fadeIn('slow').html("您输入的不是正确的IP");
					$("#ip").focus().select();
					return false;
				}
			}
		}
		$.ajax({                           
		type: "POST",
		beforeSend:function(){$("#msg").addClass('success').fadeIn('slow').html("正在查询...");},
		url: "ip.php?ip="+$("#ip").val()+"&format=text&charset=utf8",
			success: function(msg){
			$("#msg").addClass('success').fadeIn('slow').html("查询结果："+msg);
		  }
	    });
		return true;
	}
	function democode(){
		$.ajax({                           
		type: "POST",
		url: "ip.php?demo=code",
			success: function(msg){
			$("#demo").addClass('success').toggle().html(msg);
		  }
	    });
	  return true;
	}
	function demoapi(){
		$.ajax({                           
		type: "POST",
		url: "ip.php?demo=api",
			success: function(msg){
			$("#demo").addClass('success').toggle().html(msg);
		  }
	    });
	  return true;
	}
	function help(){
		$.ajax({                           
		type: "POST",
		url: "ip.php?demo=help",
			success: function(msg){
			$("#demo").addClass('success').toggle().html(msg);
		  }
	    });
	  return true;
	}
 </script>



</body>
</html>

